<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>News - 12 series &#8212; Mroonga v13.05 documentation</title>
    <link rel="stylesheet" type="text/css" href="../static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../static/mroonga.css" />
    
    <script data-url_root="../" id="documentation_options" src="../static/documentation_options.js"></script>
    <script src="../static/doctools.js"></script>
    <script src="../static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
      <meta property="fb:page_id" content="238184682903165" /><!-- mroonga -->
    <meta property="fb:admins" content="664204556" /><!-- kouhei.sutou -->
    <meta property="og:type" content="product" />
    <meta property="og:image" content="http://mroonga.org/images/logos/mroonga-icon-full-size.png" />
    <meta property="og:site_name" content="mroonga" />

    <link rel="stylesheet" href="/css/sphinx.css" type="text/css" />
  </head>
  <body>
    <div id="fb-root"></div>

<div class="header">
  <h1 class="title">
    <a id="top-link" href="../../">
      <span class="project">mroonga</span>
      <span class="separator">-</span>
      <span class="description">An open-source storage engine for fast fulltext search with MySQL.</span>
    </a>
  </h1>

      <div class="facebook-buttons">
      <fb:like href="http://www.facebook.com/pages/mroonga/238184682903165"
               layout="standard"
               width="290"></fb:like>
    </div>
    <div class="other-language-links">

    <ul>
      <li><a href="../../ja/docs/news/12.html" title="日本語">日本語</a></li>
    </ul>
  </div>
</div>
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Mroonga v13.05 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">News - 12 series</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="news-12-series">
<h1>News - 12 series<a class="headerlink" href="#news-12-series" title="Permalink to this heading">¶</a></h1>
<section id="release-12-12-2023-01-29">
<span id="release-12-12"></span><h2>Release 12.12 - 2023-01-29<a class="headerlink" href="#release-12-12-2023-01-29" title="Permalink to this heading">¶</a></h2>
<section id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added newly support for AlmaLinux 9.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>][<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>][<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for MySQL 8.0.32.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>][<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>][<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for MySQL 5.7.41</p></li>
<li><p>Added support for updating normal columns with composite primary key table. [GitHub#592][Reported by handmound]</p>
<p>We could not update normal columns when we set composite primary keys using Mroonga storage engine as below.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">scores</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">score</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">),</span>
<span class="w">  </span><span class="n">note</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
<span class="w">  </span><span class="n">FULLTEXT</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">search_note_idx</span><span class="w"> </span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mroonga</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span>

<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">scores</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;Taro Yamada&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">29</span><span class="p">);</span>

<span class="k">UPDATE</span><span class="w"> </span><span class="n">scores</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;Note&quot;</span>
<span class="w">  </span><span class="k">WHERE</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;Taro Yamada&quot;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">29</span><span class="p">;</span>

<span class="n">ERROR</span><span class="w"> </span><span class="mi">1265</span><span class="w"> </span><span class="p">(</span><span class="mi">01000</span><span class="p">):</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">truncated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">column</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This error doesn’t occur Mroonga with MariaDB.</p>
</li>
</ul>
</section>
<section id="thanks">
<h3>Thanks<a class="headerlink" href="#thanks" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>handmound</p></li>
</ul>
</section>
</section>
<section id="release-12-11-2023-01-06">
<span id="release-12-11"></span><h2>Release 12.11 - 2023-01-06<a class="headerlink" href="#release-12-11-2023-01-06" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3>Improvements<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added newly support for MariaDB 10.10.</p></li>
<li><p>[<a class="reference internal" href="../install/amazon-linux.html"><span class="doc">Amazon Linux</span></a>] Added support for MariaDB 10.5.10-2.amzn2.0.2.</p></li>
<li><p>[<a class="reference internal" href="../reference/server_variables.html"><span class="doc">Server variables</span></a>] Added a new status variable <code class="docutils literal notranslate"><span class="pre">libgroonga_support_mecab</span></code>.</p>
<p>It’s true only when Groonga supports TokenMecab.</p>
</li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for MariaDB 10.5.18.</p></li>
</ul>
</section>
<section id="fixes">
<h3>Fixes<a class="headerlink" href="#fixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/udf/mroonga_highlight_html.html"><span class="doc">mroonga_highlight_html()</span></a>] Fixed memory leak when we use <code class="docutils literal notranslate"><span class="pre">mroonga_highlight_html()</span></code> with <code class="docutils literal notranslate"><span class="pre">AS</span> <span class="pre">query</span></code>.</p></li>
<li><p>Fixed a bug that initialization of MeCab is fail when we use Mroonga on MariaDB 10.9 or later for Windows.</p></li>
</ul>
</section>
</section>
<section id="release-12-10-2022-11-29">
<span id="release-12-10"></span><h2>Release 12.10 - 2022-11-29<a class="headerlink" href="#release-12-10-2022-11-29" title="Permalink to this heading">¶</a></h2>
<section id="id2">
<h3>Improvements<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.3.37, 10.4.27, 10.5.18,
10.6.11, 10.7.7, 10.8.6, 10.9.4. [GitHub #564][Reported by Josep Sanz][Patched by Tomohiro KATO]</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 8.0.30-22.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Added support for Percona Server 5.7.40-43.</p></li>
<li><p>[<a class="reference internal" href="../install/windows.html"><span class="doc">Windows</span></a>] Added support for MariaDB 10.7, 10.8, 10.9.</p></li>
<li><p>[<a class="reference internal" href="../install/windows.html"><span class="doc">Windows</span></a>] Dropped support for 32bit versions.</p>
<p>Because recent MariaDB can’t be built for 32bit Windows, and the official packages for 32bit don’t exist.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/udf/mroonga_highlight_html.html"><span class="doc">mroonga_highlight_html()</span></a>] Added new parameters: <code class="docutils literal notranslate"><span class="pre">open_tag</span></code> and <code class="docutils literal notranslate"><span class="pre">close_tag</span></code>. [GitHub #537][Reported by ishitaka]</p>
<p>Now we can specify a tag for highlighting with <code class="docutils literal notranslate"><span class="pre">open_tag</span></code> and <code class="docutils literal notranslate"><span class="pre">close_tag</span></code>.</p>
<p>It was inconvinient for us to unable specifying different tags or changing <code class="docutils literal notranslate"><span class="pre">class</span></code> because the fixed tag <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">class=&quot;keyword&quot;&gt;...&lt;/span&gt;</span></code> was used.
Now, this new parameter provides more convenience for us because it allows specifying tags to highlight, such as <code class="docutils literal notranslate"><span class="pre">&lt;mark&gt;...&lt;/mark&gt;</span></code>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">mroonga_highlight_html</span><span class="p">(</span><span class="s1">&#39;Mroonga is the Groonga based storage engine.&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;groonga&#39;</span><span class="p">,</span>
<span class="w">                              </span><span class="s1">&#39;&lt;mark&gt;&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">open_tag</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&lt;/mark&gt;&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">close_tag</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">highlighted</span><span class="p">;</span>

<span class="c1">-- +-----------------------------------------------------------+</span>
<span class="c1">-- | highlighted                                               |</span>
<span class="c1">-- +-----------------------------------------------------------+</span>
<span class="c1">-- | Mroonga is the &lt;mark&gt;Groonga&lt;/mark&gt; based storage engine. |</span>
<span class="c1">-- +-----------------------------------------------------------+</span>
</pre></div>
</div>
<p>Please refer to <a class="reference internal" href="../reference/udf/mroonga_highlight_html.html"><span class="doc">mroonga_highlight_html()</span></a> for details.</p>
</li>
<li><p>Added support for reference count mode.</p>
<p>Though this feature can keep fixed memory usage, its performance would be dropped.
Thus, memory increments should be first consideration before using this feature.</p>
<p>The reference count mode is used with <a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_table_open_cache">table_open_cache</a> of MySQL.</p>
<p>MySQL can cache specified number of tables with <code class="docutils literal notranslate"><span class="pre">table_open_cache`</span></code>.
Groonga’s object would not be released because the cached tables are still in use.</p>
<p>The tables with low usage would be closed if number of open tables is larger than number specified with <code class="docutils literal notranslate"><span class="pre">table_open_cache</span></code>.
Groonga objects would be released at the same time with table closing if the reference count mode is enabled.</p>
<p>These are how the reference count mode keep fixed memory usage.</p>
<p>For actual use, we need to adjust balance between memory usage and perfomance with value of <code class="docutils literal notranslate"><span class="pre">table_open_cache</span></code> while checking
memory usage and value of status variables <a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/server-status-variables.html#statvar_Open_tables">Open_tables</a>.
Because this feature can keep fixed memory usage, but its performance would be dropped.</p>
<p>There is how to check <code class="docutils literal notranslate"><span class="pre">Open_tables</span></code> as follows.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SHOW</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">STATUS</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;Open_tables&#39;</span><span class="p">;</span>
<span class="c1">-- +---------------+-------+</span>
<span class="c1">-- | Variable_name | Value |</span>
<span class="c1">-- +---------------+-------+</span>
<span class="c1">-- | Open_tables   | 643   |</span>
<span class="c1">-- +---------------+-------+</span>
</pre></div>
</div>
<p>Normally, all of tables in use are cached by setting <code class="docutils literal notranslate"><span class="pre">table_open_cache</span></code> larger than <code class="docutils literal notranslate"><span class="pre">Open_tables</span></code>.
However, if there is limited memory, memory usage would be decreased by releasing memory for tables with low usage dropping from the cache.
In order to releasing tables with low usage from the cache, <code class="docutils literal notranslate"><span class="pre">table_open_cache</span></code> should be set smaller than <code class="docutils literal notranslate"><span class="pre">Open_tables</span></code>.
The smaller <code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">Tables</span></code> setting , the more tables dropping from the cache.
As cache is released, memory usage decrease, yet performance become worse due to reopen tables.
The smaller <code class="docutils literal notranslate"><span class="pre">table_open_cache</span></code>, the more necessary to reopen tables. <code class="docutils literal notranslate"><span class="pre">table_open_cache</span></code> should set as much value as only to reaching memory tolerance.</p>
<p>In order to enable reference count mode, we need to specify values in my.cnf as follows;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loose</span><span class="o">-</span><span class="n">mroonga</span><span class="o">-</span><span class="n">enable</span><span class="o">-</span><span class="n">reference</span><span class="o">-</span><span class="n">count</span> <span class="o">=</span> <span class="n">ON</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The reference count mode would not be enabled with variables after booting MySQL.
It is necesarry to specify values in my.cnf.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SET</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">mroonga_enable_reference_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">ON</span>
</pre></div>
</div>
</div>
</li>
</ul>
</section>
<section id="id3">
<h3>Fixes<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Fixed a bug that Mroonga for Windows does not bundle groonga-normalizer-mysql.</p>
<p>It was false announcement in 12.09 that groonga-normalizer-mysql is bundled in.</p>
</li>
</ul>
</section>
<section id="id4">
<h3>Thanks<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Josep Sanz</p></li>
<li><p>Tomohiro KATO</p></li>
<li><p>ishitaka</p></li>
</ul>
</section>
</section>
<section id="release-12-09-2022-10-28">
<span id="release-12-09"></span><h2>Release 12.09 - 2022-10-28<a class="headerlink" href="#release-12-09-2022-10-28" title="Permalink to this heading">¶</a></h2>
<section id="id5">
<h3>Improvements<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.9.3.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for MySQL 5.7.40.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>][<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>][<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for MySQL 8.0.31.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for MariaDB 10.6 on Ubuntu 22.04 (Jammy Jellyfish).</p></li>
<li><p>Added support for execution timeout parameter.[GitHub #344][Reported by Kazuhiko]</p>
<p>MySQL/MariaDB can abort queries if the execution timeout parameter is specified and a execution time exceeds a time specified with the parameter.
The execution timeout parameter is <code class="docutils literal notranslate"><span class="pre">MAX_EXECUTION_TIME</span></code> in MySQL and <code class="docutils literal notranslate"><span class="pre">max_statement_time</span></code> in MariaDB.</p>
<p>However, Mroonga did not abort executing queries even after MySQL/MariaDB abort the queries and return results.
So if the Groonga queries match too many results, it could continue to consume memory and CPU resources even after MySQL/MariaDB abort the queries.</p>
<p>From this version, Mroonga can abort queries in the specified time and the execution timeout parameter works correctly. So Mroonga don’t continue to consume memory and CPU resources after MySQL/MariaDB abort the queries.</p>
<p>The following how to use this feature.</p>
<p>Here is a sample for MySQL.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">diaries</span><span class="p">(</span>
<span class="w">  </span><span class="n">title</span><span class="w"> </span><span class="nb">TEXT</span>
<span class="w">  </span><span class="n">FULLTEXT</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mroonga</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span>

<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">diaries</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;It&#39;ll be fine tomorrow.&quot;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">diaries</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;It&#39;ll rain tomorrow&quot;</span><span class="p">);</span>

<span class="k">SELECT</span><span class="w"> </span><span class="cm">/*+ MAX_EXECUTION_TIME(1) */</span><span class="w"> </span><span class="n">title</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">diaries</span>
<span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">MATCH</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="n">AGAINST</span><span class="p">(</span><span class="ss">&quot;+fine&quot;</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="k">MODE</span><span class="p">);</span>
</pre></div>
</div>
<p>Here is a sample for MariaDB.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">diaries</span><span class="p">(</span>
<span class="w">  </span><span class="n">title</span><span class="w"> </span><span class="nb">TEXT</span>
<span class="w">  </span><span class="n">FULLTEXT</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mroonga</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span><span class="p">;</span>

<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">diaries</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;It&#39;ll be fine tomorrow.&quot;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">diaries</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;It&#39;ll rain tomorrow&quot;</span><span class="p">);</span>

<span class="k">SET</span><span class="w"> </span><span class="k">STATEMENT</span><span class="w"> </span><span class="n">max_statement_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">001</span><span class="w"> </span><span class="k">FOR</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">title</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">diaries</span>
<span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">MATCH</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="n">AGAINST</span><span class="p">(</span><span class="ss">&quot;+fine&quot;</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="w"> </span><span class="k">MODE</span><span class="p">);</span>
</pre></div>
</div>
<p>This feature can use in <code class="docutils literal notranslate"><span class="pre">mroonga_command()</span></code> also.</p>
</li>
</ul>
</section>
<section id="id6">
<h3>Fixes<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Fixed a bug that Mroonga for Windows does not bundle groonga-normalizer-mysql.</p>
<p>This bug had existed since Mroonga 12.02.
Therefore, We can’t groonga-normalizer-mysql from Mroonga 12.02 for Windows to Mroonga 12.08 for Windows.</p>
</li>
</ul>
</section>
<section id="id7">
<h3>Thanks<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Kazuhiko</p></li>
</ul>
</section>
</section>
<section id="release-12-08-2022-10-03">
<span id="release-12-08"></span><h2>Release 12.08 - 2022-10-03<a class="headerlink" href="#release-12-08-2022-10-03" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.6.10, 10.7.6 and 10.8.5.</p></li>
<li><p>[<a class="reference internal" href="../install/oracle-linux.html"><span class="doc">Oracle Linux</span></a>] Added support for MySQL 8.0.30.</p></li>
</ul>
</section>
<section id="release-12-07-2022-08-30">
<span id="release-12-07"></span><h2>Release 12.07 - 2022-08-30<a class="headerlink" href="#release-12-07-2022-08-30" title="Permalink to this heading">¶</a></h2>
<section id="id8">
<h3>Improvements<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.3.36, 10.4.26, 10.5.17, 10.6.9, 10.7.5 and 10.8.4.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 5.7.39-42.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 8.0.29-21.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MySQL 8.0.29 used by Percona Server 8.0.29 has a critical issue. So we do not recommend to use this version.</p>
<p>See <a class="reference external" href="https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-29.html">MySQL 8.0.29 Release Notes</a> for details about the issue.</p>
</div>
</li>
</ul>
</section>
<section id="id9">
<h3>Fixes<a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Fixed a bug to fail to install or upgrade Mroonga with install.sql.[GitHub #525][Reported by Tomohiro KATO][Patched by Jérome Perrin]</p>
<p>Broken install.sql caused this bug. This bug had occurred since Mroonga 12.06.</p>
</li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">mroonga_command()</span></code> returns results with hex dump for MySQL 8.0 and above.</p>
<p><code class="docutils literal notranslate"><span class="pre">mroonga_command()</span></code> returns results with a correct character code form this version.</p>
</li>
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Fixed an installation document for Mroonga on AlmaLinux 8. [Gitter/ja:62fe4ca5b16e8236e3ef225c][Reported by handmound]</p></li>
</ul>
</section>
<section id="id10">
<h3>Thanks<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>handmound</p></li>
<li><p>Jérome Perrin</p></li>
<li><p>Tomohiro KATO</p></li>
</ul>
</section>
</section>
<section id="release-12-06-2022-08-04">
<span id="release-12-06"></span><h2>Release 12.06 - 2022-08-04<a class="headerlink" href="#release-12-06-2022-08-04" title="Permalink to this heading">¶</a></h2>
<section id="id11">
<h3>Improvements<a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Added support for MySQL 5.7.39.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MySQL 8.0.30.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 8.0.28-20.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.8.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Dropped support for MariaDB 10.2.</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Dropped support for Debian 10 (buster).</p></li>
<li><p>Changed to not require to run update.sql for registering Mroonga to MySQL.[GitHub #509][Reported by Jérome Perrin]</p>
<p>Mroonga has required to run both install.sql and update.sql to register to MySQL since Mroonga 12.04.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">&lt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">mroonga</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">sql</span>
<span class="o">%</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">&lt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">mroonga</span><span class="o">/</span><span class="n">update</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
<p>This improvement has changed Mroonga to only require to run install.sql to register to MySQL as before than Mroonga 12.04.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">&lt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">mroonga</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id12">
<h3>Thanks<a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Jérome Perrin</p></li>
</ul>
</section>
</section>
<section id="release-12-04-2022-06-01">
<span id="release-12-04"></span><h2>Release 12.04 - 2022-06-01<a class="headerlink" href="#release-12-04-2022-06-01" title="Permalink to this heading">¶</a></h2>
<section id="id13">
<h3>Improvements<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/server_variables.html"><span class="doc">Server variables</span></a>] Add a new status variable <code class="docutils literal notranslate"><span class="pre">Mroonga_memory_map_size</span></code>.</p>
<p>We can get the total memory map size in bytes of Mroonga as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">STATUS</span> <span class="n">LIKE</span> <span class="s1">&#39;Mroonga_memory_map_size&#39;</span><span class="p">;</span>
<span class="o">+-------------------------+----------+</span>
<span class="o">|</span> <span class="n">Variable_name</span>           <span class="o">|</span> <span class="n">Value</span>    <span class="o">|</span>
<span class="o">+-------------------------+----------+</span>
<span class="o">|</span> <span class="n">Mroonga_memory_map_size</span> <span class="o">|</span> <span class="mi">83406848</span> <span class="o">|</span>
<span class="o">+-------------------------+----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p>In Windows, If Mroonga uses up physical memory and swap area, Mroonga can’t more mapping memory than that.
Therefore, we can control properly memory map size by monitoring this value even if the environment does have not enough memory.</p>
</li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 8.0.28-19.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 5.7.38-41.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.2.44, 10.3.35, 10.4.25, 10.5.16, 10.6.8, and 10.7.4.</p></li>
</ul>
</section>
<section id="id14">
<h3>Fixes<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Fixed a bug that Mroonga may update failed. [groonga-dev,04982, groonga-dev,04987][Reported by Mitsuo Yoshida and OHTSUKA Soushi]</p>
<p>If this bug occurs, Mroonga is disabled after Mroonga update with such as “apt update”.
In that case, we install Mroonga manually with the following procedure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">&lt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">mroonga</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">sql</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id15">
<h3>Thanks<a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Mitsuo Yoshida</p></li>
<li><p>OHTSUKA Soushi</p></li>
</ul>
</section>
</section>
<section id="release-12-03-2022-05-06">
<span id="release-12-03"></span><h2>Release 12.03 - 2022-05-06<a class="headerlink" href="#release-12-03-2022-05-06" title="Permalink to this heading">¶</a></h2>
<section id="id16">
<h3>Improvements<a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Added support for Percona Server 5.7.37-40.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Added support for MySQL 5.7.38.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MySQL 8.0.29.</p></li>
</ul>
</section>
<section id="id17">
<h3>Fixes<a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Fixed a bug that Mroonga may fail create the index on MariaDB 10.5.14. [GitHub clear-code/redmine_full_text_search#103][Reported by wate]</p></li>
<li><p>Fixed a memory leak on full text search. [Reported by OHTSUKA Soushi and Mitsuo Yoshida]</p>
<p>This is occurred when <a class="reference external" href="https://mroonga.org/ja/docs/reference/optimizations.html#order-by-limit">order limit optimization</a> is used.
However, if we use MariaDB, this occurs even if we don’t use order limit optimization.</p>
<p>This bug had occurred since Mroonga 11.03.</p>
</li>
</ul>
</section>
<section id="id18">
<h3>Thanks<a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>wate</p></li>
<li><p>OHTSUKA Soushi</p></li>
<li><p>Mitsuo Yoshida</p></li>
</ul>
</section>
</section>
<section id="release-12-02-2022-03-29">
<span id="release-12-02"></span><h2>Release 12.02 - 2022-03-29<a class="headerlink" href="#release-12-02-2022-03-29" title="Permalink to this heading">¶</a></h2>
<section id="id19">
<h3>Improvements<a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Dropped support wrapper mode with MySQL 8.0 or later.</p></li>
<li><p>Added support for disabling a back trace by the server variable.</p>
<p>We can disable a back trace by “SET GLOBAL mroonga_enable_back_trace = false;”.</p>
</li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">float32</span></code> weight vector.</p>
<p>We can store weight as <code class="docutils literal notranslate"><span class="pre">float32</span></code>.
We need to add <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> flag when we define a column to use this feature.</p>
</li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.3.34, 10.4.24, 10.5.15, 10.6.7, and 10.7.3.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Added support for MariaDB 10.2.43.</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>][<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Percona Server 8.0.27-18.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> flags</p>
<p>Please refer to <a class="reference external" href="https://groonga.org/docs/news.html#release-12-0-2">https://groonga.org/docs/news.html#release-12-0-2</a> about details of these flags.</p>
</li>
</ul>
</section>
</section>
<section id="release-12-00-2022-02-09">
<span id="release-12-00"></span><h2>Release 12.00 - 2022-02-09<a class="headerlink" href="#release-12-00-2022-02-09" title="Permalink to this heading">¶</a></h2>
<p>This is a major version up!
But It keeps backward compatibility. We can upgrade to 12.00 without rebuilding database.</p>
<p>First of all, we introduce the Summary of changes from Mroonga 11.00 to 11.13.
Then, we introduce the main changes in 12.00.</p>
</section>
<section id="summary-of-changes-from-mroonga-11-0-0-to-11-1-3">
<h2>Summary of changes from Mroonga 11.0.0 to 11.1.3<a class="headerlink" href="#summary-of-changes-from-mroonga-11-0-0-to-11-1-3" title="Permalink to this heading">¶</a></h2>
<section id="new-features-and-improvements">
<h3>New Features and Improvements<a class="headerlink" href="#new-features-and-improvements" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Renamed package names as below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mariadb-server-10.x-mroonga</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">mariadb-10.x-mroonga</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mysql-server-5.x-mroonga</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">mysql-community-5.x-mroonga</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mysql-server-8.x-mroonga</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">mysql-community-8.x-mroonga</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">percona-server-5x-mroonga</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">percona-server-5.x-mroonga</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">percona-server-8x-mroonga</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">percona-server-8.x-mroonga</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The package names are changed.
Mroonga may be invalid after upgrade by the influence of this modification.
If we upgrade to this version, please always be sure to confirm the below points.</p>
<p>If Mroonga is invalid after the upgrade, we need to install manually Mroonga again.
Please refer to the following URL about the manual installation of Mroonga and how to confirming whether Mroonga is valid or not.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://mroonga.org/docs/tutorial/installation_check.html">https://mroonga.org/docs/tutorial/installation_check.html</a></p></li>
</ul>
</div></blockquote>
<p>If we will upgrade mroonga to stride over a Mroonga 11.03.</p>
<p>If Mroonga is valid after upgrade to this version but, Mroonga’s version is old, we need to restart MySQL, MariaDB, or PerconaServer.
We can confirm Mroonga’s version as the below command.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SHOW</span> <span class="pre">VARIABLES</span> <span class="pre">LIKE</span> <span class="pre">'mroonga_version';</span></code></p></li>
</ul>
</div></blockquote>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/udf/mroonga_snippet_html.html"><span class="doc">mroonga_snippet_html()</span></a>] Added support for custom normalizer in <code class="docutils literal notranslate"><span class="pre">mroonga_snippet_html()</span></code></p>
<ul>
<li><p>We can use custom normalizer in <code class="docutils literal notranslate"><span class="pre">mroonga_snippet_html()</span></code> by this feature as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CREATE TABLE terms (
  term VARCHAR(64) NOT NULL PRIMARY KEY
) COMMENT=&#39;normalizer &quot;NormalizerNFKC130(&#39;&#39;unify_kana&#39;&#39;, true)&quot;&#39;
  DEFAULT CHARSET=utf8mb4
  COLLATE=utf8mb4_unicode_ci;

SELECT mroonga_snippet_html(&#39;これはMroonga（ムルンガ）です。&#39;,
                            &#39;terms&#39; as lexicon_name,
                            &#39;むるんが&#39;) as snippet;

snippet
&lt;div class=&quot;snippet&quot;&gt;これはMroonga（&lt;span class=&quot;keyword&quot;&gt;ムルンガ&lt;/span&gt;）です。&lt;/div&gt;
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/server_variables.html"><span class="doc">Server variables</span></a>] We disabled <code class="docutils literal notranslate"><span class="pre">mroonga_enable_operations_recording</span></code> by default.</p>
<p><code class="docutils literal notranslate"><span class="pre">mroonga_enable_operations_recording</span></code> to determine whether recording operations for auto recovering are enabled or not.</p>
<p>This recording of operations is for auto recovering Mroonga when it crashed.
Normally, if lock remain in Mroonga, we can’t execute INSERT/DELETE/UPDATE, but if <code class="docutils literal notranslate"><span class="pre">mroonga_enable_operations_recording</span></code> is enable, we may not execute SELECT at times in addition to INSERT/DELETE/UPDATE.
Because auto recovery is sometimes blocked by residual lock when they crashed.</p>
<p>Therefore, we set <code class="docutils literal notranslate"><span class="pre">OFF</span></code> to the default value in this version.
By we disable operation recording, INSERT/DELETE/UPDATE is blocked as usual because of the residual lock, but “SELECT” may bework.</p>
<p>An appropriate way to handle to residual lock is as follows.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://www.clear-code.com/blog/2021/6/1/mroonga-recover-lock-failed-2021.html">https://www.clear-code.com/blog/2021/6/1/mroonga-recover-lock-failed-2021.html</a>
(Japanese only)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id20">
<h3>Fixes<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Fix a crash bug that may be caused after MySQL/MariaDB upgrade.</p>
<ul class="simple">
<li><p>Mronnga may crash if we execute <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">...</span> <span class="pre">MATCH</span> <span class="pre">AGAINST</span></code> after MySQL/MariaDB upgrade.</p></li>
</ul>
</li>
<li><p>Fixed a bug that if we use “WHERE primary_key IN (“”)” in a where clause, Mroonga may return wrong record.</p>
<p>See <a class="reference internal" href="11.html#release-11-07"><span class="std std-ref">release 11.07</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/optimizations.html"><span class="doc">Optimizations</span></a>] Fixed a bug that Mroonga apply the optimization of row count wrongly.</p>
<p>See <a class="reference internal" href="11.html#release-11-10"><span class="std std-ref">release 11.10</span></a> for details.</p>
</li>
<li><p>Fixed a bug that Mroonga crashed when we upgrade DB created by MySQL 5.7 to MySQL 8.0.</p></li>
<li><p>Fixed a bug that latitude and longitude are stored conversely.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>backward compatibility is broken by this fix.</p>
<p>Users that are using <code class="docutils literal notranslate"><span class="pre">GEOMETRY</span></code> type need to store the current data before upgrading to Mroonga 11.03 and restore the stored data after upgrading to Mroonga 11.03.
Users can use the following methods for dumping/restoring data.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mysqldump</span></code></p></li>
<li><p>Execute <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">ENGINE=InnoDB</span></code> before upgrading and execute <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">ENGINE=Mroonga</span></code> after upgrading.</p></li>
</ul>
</div></blockquote>
<p>If without this fix, <code class="docutils literal notranslate"><span class="pre">INSERT/UPDATE/SELECT/SELECT</span></code> works well but data stored in Groonga are wrong (Latitude and longitude are swapped in Groonga). Therefore, <code class="docutils literal notranslate"><span class="pre">mroonga_command('select</span> <span class="pre">...')</span></code> doesn’t work for spatial data.</p>
</div>
</li>
<li><p>Fixed a bug that FOREIGN KEY constraint was not registered.</p>
<p>This bug had only occurred on MySQL 8.0.</p>
<p>See <a class="reference internal" href="11.html#release-11-01"><span class="std std-ref">release 11.01</span></a> for details.</p>
</li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">DATABASE</span></code> had failed if a target database had FOREIGN KEY constraint.</p>
<p>See <a class="reference internal" href="11.html#release-11-01"><span class="std std-ref">release 11.01</span></a> for details.</p>
</li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">COLUMN</span></code> had failed if a target table was referred a other table.</p>
<p>See <a class="reference internal" href="11.html#release-11-01"><span class="std std-ref">release 11.01</span></a> for details.</p>
</li>
<li><p>Fixed a bug that a update of Mroonga fails on MariaDB.</p></li>
</ul>
</section>
<section id="newly-supported-oses">
<h3>Newly supported OSes<a class="headerlink" href="#newly-supported-oses" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for Debian 11 (bullseye).</p></li>
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for Mroonga on AlamLinux 8.</p></li>
</ul>
</section>
<section id="dropped-oses">
<h3>Dropped OSes<a class="headerlink" href="#dropped-oses" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Dropped support for CentOS 8.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 21.04 (Hirsute Hippo) support.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 20.10 (Groovy Gorilla) support.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 16.04 LTS (Xenial Xerus) support.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for MariaDB 10.1 on Ubuntu 18.04 LTS.</p></li>
</ul>
</section>
<section id="id21">
<h3>Thanks<a class="headerlink" href="#id21" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>shibanao4870</p></li>
<li><p>Marc Laporte</p></li>
<li><p>santalex</p></li>
<li><p>Josep Sanz</p></li>
<li><p>Tomohiro KATO</p></li>
<li><p>Katsuhito Watanabe</p></li>
<li><p>kenichi arimoto</p></li>
<li><p>Vincent Pelletier</p></li>
<li><p>Kosuke Yamashita</p></li>
<li><p>ひじー</p></li>
</ul>
<p>The main changes in 12.00 are as follows.</p>
</section>
<section id="id22">
<h3>Improvements<a class="headerlink" href="#id22" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for the latest version of mysql-server package for Ubuntu.</p>
<p>We supported the following versions.</p>
<ul class="simple">
<li><p>Ubuntu 18.04 LTS (bionic) mysql-server (5.7.37-0ubuntu0.18.04.1)</p></li>
<li><p>Ubuntu 20.04 LTS (focal) mysql-server (8.0.28-0ubuntu0.20.04.3)</p></li>
<li><p>Ubuntu 21.10 LTS (impish) mysql-server (8.0.28-0ubuntu0.21.10.3)</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Added support for MariaDB 10.2.42, 10.3.33, 10.4.23, 10.5.14, and 10.6.6.</p></li>
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for MariaDB 10.3.33, 10.4.23, 10.5.14, and 10.6.6.</p></li>
</ul>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">News - 12 series</a><ul>
<li><a class="reference internal" href="#release-12-12-2023-01-29">Release 12.12 - 2023-01-29</a><ul>
<li><a class="reference internal" href="#improvements">Improvements</a></li>
<li><a class="reference internal" href="#thanks">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-11-2023-01-06">Release 12.11 - 2023-01-06</a><ul>
<li><a class="reference internal" href="#id1">Improvements</a></li>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-10-2022-11-29">Release 12.10 - 2022-11-29</a><ul>
<li><a class="reference internal" href="#id2">Improvements</a></li>
<li><a class="reference internal" href="#id3">Fixes</a></li>
<li><a class="reference internal" href="#id4">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-09-2022-10-28">Release 12.09 - 2022-10-28</a><ul>
<li><a class="reference internal" href="#id5">Improvements</a></li>
<li><a class="reference internal" href="#id6">Fixes</a></li>
<li><a class="reference internal" href="#id7">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-08-2022-10-03">Release 12.08 - 2022-10-03</a></li>
<li><a class="reference internal" href="#release-12-07-2022-08-30">Release 12.07 - 2022-08-30</a><ul>
<li><a class="reference internal" href="#id8">Improvements</a></li>
<li><a class="reference internal" href="#id9">Fixes</a></li>
<li><a class="reference internal" href="#id10">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-06-2022-08-04">Release 12.06 - 2022-08-04</a><ul>
<li><a class="reference internal" href="#id11">Improvements</a></li>
<li><a class="reference internal" href="#id12">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-04-2022-06-01">Release 12.04 - 2022-06-01</a><ul>
<li><a class="reference internal" href="#id13">Improvements</a></li>
<li><a class="reference internal" href="#id14">Fixes</a></li>
<li><a class="reference internal" href="#id15">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-03-2022-05-06">Release 12.03 - 2022-05-06</a><ul>
<li><a class="reference internal" href="#id16">Improvements</a></li>
<li><a class="reference internal" href="#id17">Fixes</a></li>
<li><a class="reference internal" href="#id18">Thanks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-02-2022-03-29">Release 12.02 - 2022-03-29</a><ul>
<li><a class="reference internal" href="#id19">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-12-00-2022-02-09">Release 12.00 - 2022-02-09</a></li>
<li><a class="reference internal" href="#summary-of-changes-from-mroonga-11-0-0-to-11-1-3">Summary of changes from Mroonga 11.0.0 to 11.1.3</a><ul>
<li><a class="reference internal" href="#new-features-and-improvements">New Features and Improvements</a></li>
<li><a class="reference internal" href="#id20">Fixes</a></li>
<li><a class="reference internal" href="#newly-supported-oses">Newly supported OSes</a></li>
<li><a class="reference internal" href="#dropped-oses">Dropped OSes</a></li>
<li><a class="reference internal" href="#id21">Thanks</a></li>
<li><a class="reference internal" href="#id22">Improvements</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Mroonga v13.05 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">News - 12 series</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2023, Mroonga Project.
    </div>
      <script src="http://connect.facebook.net/en_US/all.js"></script>

    <script>
      FB.init({
         appId  : null,
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML
      });
    </script>
  </body>

</html>